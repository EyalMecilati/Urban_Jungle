<mat-spinner color='Accent' class="spinner" *ngIf="loading"></mat-spinner>
<mat-drawer-container class="container">
    <!-- side cart -->
    <mat-drawer class="side" mode="side" [opened]='opened'>
        <header>
            <h2>Your Cart</h2>
        </header>
        <mat-card class="cartProduct" *ngFor="let product of userCart; let i = index">
            <mat-card-header>
                <img mat-card-avatar [src]="productsFromLastOrder[i].img_url" alt="User Avatar">
                <mat-card-title class="cartProductTitle">{{productsFromLastOrder[i].prdouct_name}}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <label>Quantity: {{product.quantity}}</label>
                <label>Price: {{productsFromLastOrder[i].price}}</label>
                <span class="material-icons delete" (click)='removeProductFromCart(product)'>
                    delete
                </span>
            </mat-card-content>
        </mat-card>
        <footer>
            <h3 *ngIf="errorMsg">{{errorMsg}}</h3>
            <h4>total sum: {{totlalSumFromOldOrder}}</h4>
        </footer>
    </mat-drawer>
    <!-- main view -->
    <mat-drawer-content>
        <header>
            <input placeholder="          search product" type="text" [(ngModel)]="searchTerm">
            <h2>Products</h2>
            <span (click)='toggleCart()' class="material-icons">
                reorder
            </span>
        </header>
        <div class="products">
            <div class="categorySort" *ngFor="let category of categorys">
                <div class="wrapper" *ngFor="let product of products">
                    <mat-card class="Productbox" *ngIf="product.category_id._id == category._id">
                        <h1>{{category.category_name}}</h1>
                        <mat-card-header class="productHeader">
                            <mat-card-title class="cartProductTitle"
                                [innerHTML]='product.prdouct_name |colorYellow:searchTerm'></mat-card-title>
                        </mat-card-header>
                        <mat-card-content>
                            <img class="productImg" [src]="product.img_url" alt="User Avatar">
                            <p>Price: {{product.price}}</p>
                            <button mat-raised-button (click)="openDialog(product)">Add item to Cart</button>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        </div>
    </mat-drawer-content>
</mat-drawer-container>